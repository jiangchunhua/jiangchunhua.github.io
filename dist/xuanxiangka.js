window.onload=function(){function e(e,t){clearInterval(e.timer),e.timer=setInterval(function(){d+=(t-a)/5,d*=.7,a+=d,e.style.left=Math.round(a)+"px",e.offsetLeft==t&&Math.abs(d)<1&&clearInterval(e.timer)},30)}function t(){for(var e=0;e<y.length;e++)y[e].className="shadow";5==I?(y[0].className="",move(W,{left:0}),x.innerHTML="<p>"+E[0]+"</p>"):(move(W,{left:I*y[0].offsetWidth}),y[I].className="",x.innerHTML="<div></div><p>"+E[I]+"</p>"),move(v,{left:-I*p[0].offsetWidth},{time:700,fn:function(){L=!0,5==I&&(v.style.left=0,I=0)}})}function n(){L&&(L=!1,I++,t())}function o(e){0>e&&(e=0),e>k.offsetWidth-H.offsetWidth&&(e=k.offsetWidth-H.offsetWidth);var t=H.offsetLeft/(k.offsetWidth-H.offsetWidth);M.style.left=t*(B.offsetWidth-M.offsetWidth+11)+5+"px",H.style.left=e+"px"}function i(){for(var e=0;e<z.length;e++){var t=Math.abs(X.offsetWidth/2-(_.offsetLeft+j[e].offsetLeft+j[e].offsetWidth/2)),n=1-t/800;.5>n&&(n=.5),z[e].style.width=520*n+"px",z[e].style.height=358*n+"px",z[e].style.marginLeft=-(z[e].offsetWidth-j[e].offsetWidth)/2+"px",z[e].style.marginTop=-(z[e].offsetHeight-j[e].offsetHeight)/2+"px",z[e].style.zIndex=parseInt(1e4*n),z[e].style.opacity=n}}function f(e){_.style.left=X.offsetWidth/2-(e+.5)*j[0].offsetWidth+"px",i()}for(var s=document.getElementById("parent"),l=document.getElementById("nav"),c=l.children[0].children,r=c[c.length-1],d=0,a=0,m=null,u=0;u<c.length-1;u++)c[u].onmouseover=function(){e(r,this.offsetLeft)},c[u].onmouseout=function(){m?e(r,m.offsetLeft):e(r,c[0].offsetLeft)};var h=document.getElementById("banner"),v=h.children[0],p=v.children;v.innerHTML+=v.innerHTML,v.style.width=p[0].offsetWidth*p.length+"px";var g=document.getElementById("slt_btn"),y=g.children[0].getElementsByTagName("div"),W=g.children[1],x=document.getElementById("img_text"),I=0,L=!0,T=null,E=["哈士奇","拉布拉多","藏獒","泰迪","德国牧羊犬"];c[0].onclick=function(){move(s,{top:-h.offsetTop+100})};for(var u=0;u<y.length;u++)!function(e){y[u].onmouseover=function(){I=e,t()}}(u);T=setInterval(function(){n()},2e3),h.onmouseover=g.onmouseover=function(){clearInterval(T)},h.onmouseout=g.onmouseout=function(){T=setInterval(function(){n()},2e3)};var B=document.getElementById("card"),w=B.getElementsByTagName("a"),M=B.children[0],b=B.children[0].children;M.style.width=b[0].offsetWidth*b.length+16*b.length+"px";var k=document.getElementById("guide"),H=k.children[0];c[1].onclick=function(){move(s,{top:-B.offsetTop+100}),m=this},H.onmousedown=function(e){var t=e||event,n=t.clientX-H.offsetLeft;return document.onmousemove=function(e){var t=e||event,i=t.clientX-n;o(i)},document.onmouseup=function(){document.onmousemove=document.onmouseup=null,H.releaseCapture&&H.releaseCapture()},H.setCapture&&H.setCapture(),!1},addMouseWheel(B,function(e){var t=H.offsetLeft;e?t+=40:t-=40,o(t)});for(var u=0;u<b.length;u++)b[u].onmouseover=function(){this.style.left="-5px",this.style.top="-5px",this.style.boxShadow="5px 5px 5px #fff"},b[u].onmouseout=function(){this.style.left=0,this.style.top=0,this.style.boxShadow="0 0 0"};for(var u=0;u<w.length;u++)w[u].onmouseover=function(){this.className="active"},w[u].onmouseout=function(){this.className=""};var N=document.getElementById("kinds"),C=N.children;c[2].onclick=function(){move(s,{top:-N.offsetTop+100}),m=this};for(var u=1;u<C.length;u++)C[u].style.left=C[u].offsetWidth+20*(u-1)+"px";for(var u=0;u<C.length;u++)!function(e){C[u].onmouseover=function(){for(var t=0;t<C.length;t++)e>=t?move(C[t],{left:20*t},{time:1e3}):move(C[t],{left:C[t].offsetWidth+20*(t-1)},{time:1e3})}}(u);var X=document.getElementById("drag"),_=X.children[0],j=_.children,z=_.getElementsByTagName("img");_.getElementsByTagName("span");_.style.width=_.children.length*j[0].offsetWidth+"px",c[3].onclick=function(){move(s,{top:-X.offsetTop+100}),m=this},_.onmousedown=function(e){var t=e||event,n=t.clientX-_.offsetLeft;return document.onmousemove=function(e){var t=e||event,o=t.clientX-n;o>X.offsetWidth/2-.5*j[0].offsetWidth&&(o=X.offsetWidth/2-.5*j[0].offsetWidth),o<X.offsetWidth/2-(j.length-1+.5)*j[0].offsetWidth&&(o=X.offsetWidth/2-(j.length-1+.5)*j[0].offsetWidth),_.style.left=o+"px",i()},document.onmouseup=function(){document.onmousemove=document.onmouseup=null},!1},f(parseInt(j.length/2)),addEvent(window,"resize",i);var S=document.getElementById("big"),q=S.children[0].children,A=!0,D=["xuenarui","songshi","hudie","bianmu","gumu","jinmao","bixiong","lachang","samo"];c[4].onclick=function(){move(s,{top:-S.offsetTop+100}),m=this};for(var u=0;u<q.length;u++)q[u].index=u,q[u].onclick=function(){if(A){A=!1;var e=document.createElement("div");e.innerHTML='<img src="images/'+D[this.index]+'.jpg" alt=""><span>&times;</span>',S.appendChild(e),move(e,{width:500,height:400,marginTop:-220,marginLeft:-250});var t=e.children[1];t.onclick=function(){move(e,{width:0,height:0,marginTop:0,marginLeft:0},{fn:function(){S.removeChild(e),A=!0}})}}};var F=document.getElementById("random"),G=F.children[0].children,J=F.children[1].children,K=document.getElementById("close_footprint"),O=!0,P=setInterval(function(){var e=rnd(0,2),t=rnd(0,2);move(G[e],{opacity:1},{fn:function(){move(J[t],{opacity:1},{fn:function(){move(G[e],{opacity:0},{fn:function(){move(J[t],{opacity:0})}})}})}})},1e3);K.onclick=function(){if(O){clearInterval(P),this.children[0].innerHTML="打开脚印";for(var e=0;e<G.length;e++)move(G[e],{opacity:0}),move(J[e],{opacity:0});O=!1}else P=setInterval(function(){var e=rnd(0,2),t=rnd(0,2);move(G[e],{opacity:1},{fn:function(){move(J[t],{opacity:1},{fn:function(){move(G[e],{opacity:0},{fn:function(){move(J[t],{opacity:0})}})}})}})},1e3),this.children[0].innerHTML="关闭脚印",O=!0}};